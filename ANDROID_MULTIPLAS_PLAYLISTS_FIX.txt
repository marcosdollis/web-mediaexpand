â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AJUSTE APP ANDROID TV - SUPORTE A MÃšLTIPLAS PLAYLISTS POR HORÃRIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ DIAGNÃ“STICO DO PROBLEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PROBLEMA RESOLVIDO NA API!

A API foi ATUALIZADA para retornar mÃºltiplas playlists mescladas automaticamente:
  âœ“ Se hÃ¡ 2+ playlists 24/7, a API mescla TODAS em uma Ãºnica sequÃªncia
  âœ“ Retorna campo 'playlists_mescladas' com os IDs de todas as playlists
  âœ“ O campo 'videos' contÃ©m TODOS os vÃ­deos em sequÃªncia (Playlist A completa + Playlist B completa)

COMO FUNCIONA AGORA:
  â€¢ Dispositivo tem 2 playlists sem horÃ¡rio (24/7)
  â€¢ API retorna uma "mega-playlist" com:
    - videos: [vÃ­deos da playlist 1... vÃ­deos da playlist 2...]
    - nome: "Playlist A + Playlist B"
    - playlists_mescladas: [1, 2]
  
O APP ANDROID nÃ£o precisa fazer nada especial, basta tocar os vÃ­deos em loop!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ SOLUÃ‡ÃƒO - PROBLEM RESOLVIDO NO BACKEND!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… A API foi modificada para mesclar automaticamente mÃºltiplas playlists 24/7

âœ… O app Android NÃƒO precisa de mudanÃ§as! Basta:
   1. Reiniciar o app (ou aguardar prÃ³xima sincronizaÃ§Ã£o)
   2. A API vai retornar TODOS os vÃ­deos das 2 playlists mesclados
   3. O app vai tocar em loop normalmente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ IMPLEMENTAÃ‡ÃƒO RECOMENDADA (OPCIONAL - MELHORIA FUTURA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para melhorar ainda mais, o app PODE (mas nÃ£o precisa) implementar verificaÃ§Ã£o
periÃ³dica para detectar mudanÃ§as de playlist em tempo real (quando admin altera).

CÃ³digo simplificado:

```kotlin
// Verificar a cada 2-5 minutos se houve mudanÃ§a
private fun checkForPlaylistUpdate() {
    val url = "$BASE_URL/api/tv/auth/"
    // ... faz request ...
    
    val newVideos = response.getJSONObject("playlist")
        .getJSONArray("videos")
    
    // Se lista de vÃ­deos mudou, recarrega
    if (videosChanged(currentVideos, newVideos)) {
        reloadPlaylist()
    }
}
```

MAS ISSO Ã‰ OPCIONAL! O app atual jÃ¡ vai funcionar apÃ³s reiniciar.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š RESPOSTA DA API /api/tv/auth/ (ATUALIZADA!)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Se vocÃª tem 2 playlists 24/7 vinculadas ao dispositivo, a API agora retorna:

```json
{
  "dispositivo_id": 1,
  "dispositivo_nome": "TV Shopping Center",
  "municipio": "SÃ£o Paulo/SP",
  "playlist": {
    "id": 0,  // 0 = mÃºltiplas playlists mescladas
    "nome": "Playlist ManhÃ£ + Playlist Tarde",
    "duracao_total_segundos": 600,
    "playlists_mescladas": [3, 5],  // IDs das playlists originais
    "videos": [
      // â”€â”€ VÃ­deos da Playlist 1 â”€â”€
      {
        "id": 10,
        "tipo": "video",
        "titulo": "Video A1",
        "arquivo_url": "https://...",
        "duracao_segundos": 30
      },
      {
        "id": 11,
        "tipo": "video",
        "titulo": "Video A2",
        "arquivo_url": "https://...",
        "duracao_segundos": 45
      },
      // â”€â”€ VÃ­deos da Playlist 2 â”€â”€
      {
        "id": 20,
        "tipo": "video",
        "titulo": "Video B1",
        "arquivo_url": "https://...",
        "duracao_segundos": 30
      },
      {
        "id": 21,
        "tipo": "video",
        "titulo": "Video B2",
        "arquivo_url": "https://...",
        "duracao_segundos": 40
      }
    ]
  }
}
```

O APP ANDROID APENAS TOCA EM LOOP ESSA LISTA COMPLETA!
Automaticamente vai tocar: A1 â†’ A2 â†’ B1 â†’ B2 â†’ volta para A1...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ LÃ“GICA DE FUNCIONAMENTO (SIMPLIFICADA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. APP INICIA
   â””â”€> Chama /api/tv/auth/ â†’ recebe lista completa de vÃ­deos (todas as playlists mescladas)
   â””â”€> Inicia reproduÃ§Ã£o em loop normal

2. A CADA 2-5 MINUTOS (RECOMENDADO - verificaÃ§Ã£o de playlist)
   â””â”€> Chama /api/tv/auth/ novamente
   â””â”€> Compara IDs dos vÃ­deos recebidos com os atuais
   â””â”€> Se mudou: recarrega e reinicia reproduÃ§Ã£o

3. A CADA 1 MINUTO (OPCIONAL - verificaÃ§Ã£o de horÃ¡rio)
   â””â”€> Chama /api/tv/check-schedule/{uuid}/
   â””â”€> Se should_display = false:
       â””â”€> Pausa reproduÃ§Ã£o (mostra tela preta)
   â””â”€> Se should_display = true:
       â””â”€> Retoma reproduÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š RESPOSTA DA API /api/tv/check-schedule/ (ATUALIZADA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Quando hÃ¡ mÃºltiplas playlists mescladas:

```json
{
  "should_display": true,
  "current_time": "2026-02-28T14:30:00-03:00",
  "dispositivo_nome": "TV Shopping Center",
  "has_playlist": true,
  "playlist_id": 0,  // 0 = mÃºltiplas playlists mescladas
  "playlist_nome": "Playlist A + Playlist B",
  "playlists_mescladas": [3, 5],  // IDs das playlists originais
  "agendamentos": [
    {
      "nome": "Playlist A",
      "dias_semana": [0, 1, 2, 3, 4, 5, 6],
      "hora_inicio": null,  // null = 24/7
      "hora_fim": null,
      "playlist_id": 3,
      "playlist_nome": "Playlist A",
      "prioridade": 10
    },
    {
      "nome": "Playlist B", 
      "dias_semana": [0, 1, 2, 3, 4, 5, 6],
      "hora_inicio": null,  // null = 24/7
      "hora_fim": null,
      "playlist_id": 5,
      "playlist_nome": "Playlist B",
      "prioridade": 10
    }
  ]
}
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸ CONFIGURAÃ‡Ã•ES RECOMENDADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Intervalo de verificaÃ§Ã£o de playlist: 2-5 minutos
  â€¢ Recarrega /api/tv/auth/ periodicamente para pegar mudanÃ§as
  â€¢ Compara IDs dos vÃ­deos para detectar se playlist mudou
  â€¢ Muito frequente: sobrecarga desnecessÃ¡ria
  â€¢ Muito espaÃ§ado: demora para perceber mudanÃ§as

Cache de vÃ­deos:
  â€¢ Manter cache dos Ãºltimos vÃ­deos baixados
  â€¢ Evita re-download quando API retorna mesmos vÃ­deos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… O QUE O APP ANDROID JÃ DEVE ESTAR FAZENDO (E CONTINUA FUNCIONANDO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Chama /api/tv/auth/ ao iniciar
2. Recebe lista de vÃ­deos no campo 'playlist.videos'
3. Toca cada vÃ­deo em loop infinito
4. Registra logs de exibiÃ§Ã£o

COM A MUDANÃ‡A NA API:
  âœ“ Se hÃ¡ 1 playlist: recebe vÃ­deos dessa playlist (comportamento antigo)
  âœ“ Se hÃ¡ 2+ playlists 24/7: recebe vÃ­deos de TODAS mescladas (novo!)
  âœ“ O app NÃƒO precisa mudar nada, apenas toca a lista completa em loop

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA: Ainda toca sÃ³ uma playlist
â””â”€> Verifique a resposta da API /api/tv/auth/ no log
â””â”€> Deve conter campo 'playlists_mescladas' se hÃ¡ mÃºltiplas
â””â”€> Confirme que ambas playlists estÃ£o ATIVAS no admin
â””â”€> Confirme que os agendamentos estÃ£o ATIVOS no admin
â””â”€> Verifique se hora_inicio/hora_fim sÃ£o NULL (24/7)

PROBLEMA: VÃ­deos duplicados
â””â”€> Normal! Se vocÃª adicionou o mesmo vÃ­deo em 2 playlists, ele vai aparecer 2 vezes
â””â”€> SoluÃ§Ã£o: remover vÃ­deo duplicado de uma das playlists

PROBLEMA: Ordem errada dos vÃ­deos
â””â”€> A API mescla na ordem de prioridade dos agendamentos
â””â”€> Playlist de maior prioridade vem primeiro
â””â”€> Ajuste a prioridade no admin se necessÃ¡rio

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST - TESTE SE ESTÃ FUNCIONANDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NO ADMIN WEB:
[ ] Criar/verificar 2 playlists ativas com vÃ­deos diferentes
[ ] Vincular ambas ao mesmo dispositivo (seÃ§Ã£o "Playlists Vinculadas")
[ ] Certificar que hora_inicio e hora_fim estÃ£o VAZIOS (24/7)
[ ] Certificar que campo "Ativo" estÃ¡ marcado
[ ] Pode configurar prioridades diferentes se quiser ordem especÃ­fica

TESTE NA API:
[ ] Chamar /api/tv/auth/ com identificador_unico do dispositivo
[ ] Verificar resposta contÃ©m campo 'playlists_mescladas': [ID1, ID2]
[ ] Verificar que 'videos' contÃ©m vÃ­deos das 2 playlists
[ ] Nome deve ser "Playlist A + Playlist B"

NO APP ANDROID:
[ ] Reiniciar app ou forÃ§ar nova sincronizaÃ§Ã£o
[ ] Verificar logs: quantos vÃ­deos foram baixados?
[ ] Deve ser: (vÃ­deos playlist 1) + (vÃ­deos playlist 2)
[ ] Observar reproduÃ§Ã£o: deve tocar todos os vÃ­deos em sequÃªncia

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ RESUMO FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PROBLEMA RESOLVIDO NO BACKEND!

O que foi feito:
  â€¢ API modificada para retornar mÃºltiplas playlists 24/7 mescladas automaticamente
  â€¢ Campo 'videos' agora contÃ©m vÃ­deos de TODAS as playlists em sequÃªncia
  â€¢ App Android vai receber lista completa e tocar em loop normal

PrÃ³ximos passos:
  1. Reinicie o app Android para forÃ§ar nova sincronizaÃ§Ã£o
  2. Verifique no admin que ambas playlists estÃ£o ATIVAS
  3. Verifique que os agendamentos estÃ£o sem horÃ¡rio (hora_inicio e hora_fim vazios)
  4. O app deve automaticamente tocar todos os vÃ­deos das 2 playlists em sequÃªncia!

Se ainda nÃ£o funcionar apÃ³s reiniciar o app:
  â€¢ Teste a API manualmente: POST https://seu-dominio.com/api/tv/auth/
  â€¢ Envie: {"identificador_unico": "UUID-DO-SEU-DISPOSITIVO"}
  â€¢ Verifique se retorna campo 'playlists_mescladas' na resposta
  â€¢ Conte quantos vÃ­deos estÃ£o no array 'videos' - deve ser soma das 2 playlists

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

